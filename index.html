<!DOCTYPE html>
<html>

<head>
	<title>Manuel</title>
	<link rel="stylesheet" href="style.css">
	<link rel="shortcut icon" href="img/icone.ico" type="image/x-icon">
	<!-- <script src="js.js"></script> -->
</head>

<body onload="editionchoisie(), checkCookie()">


	<div id="firstbutton">
		<div class="changeTheme">
			<img src="img/blackandwhite.png" alt="blackandwhite" style="max-width: 50px; max-height: 50px; margin: 10px;">
		</div>

		<div>
			<label for="code">Entrez le code :</label>
			<input type="text" id="code" name="code" value="9782017102106">
			<button onclick="urlachanger()">Changer de livre</button>
		</div>

		<div>
			<label for="nbpage">Entrez la page :</label>
			<input type="text" id="nbpage" name="nbpage" value="1">
			<button onclick="changerNBpage()">Changer la page du livre</button>
		</div>

		<div>
			<label for="edition">Choisissez une édition :</label>
			<select name="edition" id="edition-select" onchange="editionchoisie()">
				<option value="hachette">Hachette</option>
				<option value="didier">Didier</option>
				<option value="hatier">Hatier</option>
				<option value="belin">Belin</option>
				<option value="LLS">LLS</option>
			</select>
			<p id="editionesthcoisieest"></p>
		</div>
		<div>
			<a href="rechercher.html">Cherche ton code ici</a>
		</div>
	</div>

	<div>
		<h1>Liens rapides :</h1>
		<button onclick="changerURL(9782017102106, 'hachette')">
			<h1>Declic Maths 1re</h1>
		</button>
		<button onclick="changerURL(9782017102120, 'hachette')">
			<h1>Physique Chimie 1re</h1>
		</button>
		<button onclick="changerURL(9782017102243, 'hachette')">
			<h1>Mitreden Allemand 1re</h1>
		</button>
		<button onclick="changerURL(9782401090132, 'hatier')">
			<h1>Manuel HB test</h1>
		</button>
		<button onclick="changerURL('1ere/histoire-premiere', 'belin')">
			<h1>Histoire (belin)</h1>
		</button>

		<button onclick="changerURL('1ere/geographie-premiere', 'belin')">
			<h1>Geographie (belin)</h1>
		</button>
	</div>

	<div class="slider">
		<div id="glissière" onclick="taille()" class="col">
			<input id="slider" type="range" oninput="taille()" min="579" max="1200" class="slider" value="579">
		</div>
	</div>

	<div id="iframe">
		<iframe id="myframe1" src="html/404.html"></iframe>
		<iframe id="myframe2" src="html/404.html"></iframe>
	</div>

	<div id="img">
		<img id="myimg1" src="img/404.png">
		<img id="myimg2" src="img/404.png">
	</div>

	<div>
		<button onclick="pageachanger(-2)">&#x2190; Page précédente</button>
		<button onclick="pageachanger(2)">Page suivante &#x2192;</button>
	</div>

	<script>
		var iframe1 = document.getElementById("myframe1");
		var iframe2 = document.getElementById("myframe2");
		var diviframe = document.getElementById("iframe")
		var img1 = document.getElementById("myimg1");
		var img2 = document.getElementById("myimg2")
		var divimg = document.getElementById("img");
		var url1 = iframe1.src;
		var url2 = iframe2.src;
		var page1 = 1;
		var page2 = 2;
		var nbpage = document.getElementById("nbpage");

		function editionchoisie() {
			var editionchoisie = document.getElementsByName("edition")[0].value;
			var slider = document.getElementById("slider");

			if (editionchoisie == 'hachette') {
				console.log("hachette");
				document.getElementById("editionesthcoisieest").innerHTML = "";
				diviframe.style.display = '';
				slider.style.display = '';
				divimg.style.display = 'none';

			}
			else if ((editionchoisie == 'didier') || (editionchoisie == 'hatier')) {
				console.log("DH");
				document.getElementById("editionesthcoisieest").innerHTML = "";
				diviframe.style.display = '';
				slider.style.display = '';
				divimg.style.display = 'none';
			}
			else if (editionchoisie == 'belin') {
				console.log("belin");
				document.getElementById("editionesthcoisieest").innerHTML = "ca bug encore";
				diviframe.style.display = 'none';
				slider.style.display = 'none';
				divimg.style.display = '';
			}
			else {
				document.getElementById("editionesthcoisieest").innerHTML = "&#9888 Cette édition n'est pas encore supportée &#9888";
				diviframe.style.display = 'none';
				divimg.style.display = 'none';
				slider.style.display = 'none';
			}
		}


		function urlachanger() {
			var code = document.getElementById("code").value;
			var editionchoisie = document.getElementsByName("edition")[0].value;
			changerURL(code, editionchoisie);
		}

		function changerURL(code, editionchoisie) {
			if (editionchoisie == 'hachette') {
				var newUrl1 = "https://exobank.hachette-livre.fr/contents/final/" + code + "-fxl/OEBPS/Page_1.html?interface=postMessage";
				var newUrl2 = "https://exobank.hachette-livre.fr/contents/final/" + code + "-fxl/OEBPS/Page_2.html?interface=postMessage";
				iframe1.src = newUrl1;
				iframe2.src = newUrl2;
			}
			else if ((editionchoisie == 'didier') || (editionchoisie == 'hatier')) {
				var newUrl1 = "https://exobank.hachette-livre.fr/contents/final/" + code + "-fxl/OEBPS/page1.xhtml?interface=postMessage";
				var newUrl2 = "https://exobank.hachette-livre.fr/contents/final/" + code + "-fxl/OEBPS/page2.xhtml?interface=postMessage";
				iframe1.src = newUrl1;
				iframe2.src = newUrl2;
			}
			else if (editionchoisie == 'belin') {
				var newUrl1 = "Belin/" + code + "/page1.jpg";
				var newUrl2 = "Belin/" + code + "/page2.jpg";
				img1.src = newUrl1;
				img2.src = newUrl2;
			}
			else {

			}

			url1 = newUrl1;
			url2 = newUrl2;
			page1 = 1;
			page2 = 2;
		}

		function pageachanger(delta) {
			console.log("pageachanger");
			var editionchoisie = document.getElementsByName("edition")[0].value;
			changerPage(delta, editionchoisie);
		}

		function changerPage(delta, editionchoisie) {
			if (editionchoisie == 'hachette') {
				console.log("hachette");
				page1 += delta;
				page2 += delta;
				if (page1 < 1) {
					page1 = 1;
				} else if (page1 > 600) {
					page1 = 600;
				}
				if (page2 < 1) {
					page2 = 2;
				} else if (page2 > 600) {
					page2 = 600;
				}
				iframe1.src = url1.replace(/Page_\d+/, "Page_" + page1);
				iframe2.src = url2.replace(/Page_\d+/, "Page_" + page2);
				nbpage.value = page1
			}
			else if ((editionchoisie == 'didier') || (editionchoisie == 'hatier')) {
				console.log("hatier ou didier");
				page1 += delta;
				page2 += delta;
				if (page1 < 1) {
					page1 = 1;
				} else if (page1 > 600) {
					page1 = 600;
				}
				if (page2 < 1) {
					page2 = 2;
				} else if (page2 > 600) {
					page2 = 600;
				}
				iframe1.src = url1.replace(/page\d+/, "page" + page1);
				iframe2.src = url2.replace(/page\d+/, "page" + page2);
				nbpage.value = page1
			}
			else if (editionchoisie == 'belin') {
				console.log("belin");
				page1 += delta;
				page2 += delta;
				if (page1 < 1) {
					page1 = 1;
				} else if (page1 > 600) {
					page1 = 600;
				}
				if (page2 < 1) {
					page2 = 2;
				} else if (page2 > 600) {
					page2 = 600;
				}
				img1.src = url1.replace(/page\d+/, "page" + page1);
				img2.src = url2.replace(/page\d+/, "page" + page2);
				nbpage.value = page1
			}

		}

		function changerNBpage() {
			var nbpage = document.getElementById("nbpage").value;
			nbtochange = nbpage - page1;
			changerPage(nbtochange);
		}
	</script>

	<script>
		function taille() {
			var entree = document.getElementById("slider");
			var myframe1 = document.getElementById("myframe1");
			var myframe2 = document.getElementById("myframe2");
			myframe1.style.width = entree.value + "px";
			myframe1.style.height = entree.value * 1.4 + "px";
			myframe2.style.width = entree.value + "px";
			myframe2.style.height = entree.value * 1.4 + "px";
		}
	</script>

	<script>
		function toggleFullScreen() {
			if (!document.fullscreenElement) {
				document.documentElement.requestFullscreen();
			} else if (document.exitFullscreen) {
				document.exitFullscreen();
			}
		}
		document.addEventListener("keydown", (e) => {
			if (e.key === "Enter") {
				toggleFullScreen();
			}
		}, false);
	</script>

	<script>
		let toggleTheme = 0;
		var darkMode = getCookie("dark-mode");

		function getCookie(name) {
			var value = "; " + document.cookie;
			var parts = value.split("; " + name + "=");
			if (parts.length == 2) return parts.pop().split(";").shift();
		}

		// cookie pour le mode sombre
		function checkCookie() {
			if (darkMode == "true") {
				document.documentElement.style.setProperty('--ecriture', '#f1f1f1');
				document.documentElement.style.setProperty('--background', '#262626');
				toggleTheme--;
			} else if (darkMode == "false") {
				document.documentElement.style.setProperty('--ecriture', '#262626');
				document.documentElement.style.setProperty('--background', '#f1f1f1');
			}
		}

		// mode sombre
		const switchThemeBtn = document.querySelector('.changeTheme')
		switchThemeBtn.addEventListener('click', () => {
			if (toggleTheme === 0) {
				document.documentElement.style.setProperty('--ecriture', '#f1f1f1');
				document.documentElement.style.setProperty('--background', '#262626');
				document.cookie = "dark-mode=true; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/";
				toggleTheme--;
			} else {
				document.documentElement.style.setProperty('--ecriture', '#262626');
				document.documentElement.style.setProperty('--background', '#f1f1f1');
				document.cookie = "dark-mode=false; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/";
				toggleTheme++;
			}
		})
	</script>
</body>

</html>